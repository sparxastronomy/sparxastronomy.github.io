---
const { currentPath, navItems, id } = Astro.props;
const getIsActive = (item) => {
  if (item.url === "/") return currentPath === "/";
  if (item.url.startsWith("/#about")) return currentPath === "/";
  return currentPath === item.url;
};
---
<nav
  aria-label="Main navigation"
  id={id}
  class="absolute top-[68px] left-0 w-full md:w-auto z-50 transition-all duration-300
         hidden flex-col md:static md:flex md:flex-row items-center
       bg-white dark:bg-black md:bg-none
         backdrop-filter backdrop-blur-[36px]
         rounded-[35.5px] md:rounded-none py-2 md:py-0
         border-[1.5px] md:border-0 border-black-200 dark:border-gray-700"
>
  <ul class="flex flex-col md:flex-row gap-6 md:gap-4 px-4 py-4 md:py-0 md:px-0 w-full h-auto">
    {navItems.map((item, i) => (
      <li
        style={`transition-delay: ${i * 60}ms;`}
        class="navlink-item opacity-0 transform translate-y-4 md:translate-y-0 md:opacity-100"
      >
        <a
          href={item.url}
          class={`relative px-2 py-2 rounded-[24px] font-semibold text-base transition
            ${getIsActive(item)
              ? "bg-gradient-to-b from-blue-400 to-blue-700 shadow-3d text-white border border-blue-700"
              : "bg-transparent text-gray-700 dark:text-gray-200 hover:bg-blue-100 dark:hover:bg-blue-800 hover:text-blue-700"
            }`}
          aria-current={getIsActive(item) ? "page" : undefined}
        >
          {item.name}
        </a>
      </li>
    ))}
  </ul>
</nav>

<style lang="postcss">
.shadow-3d {
  box-shadow:
    0 2px 6px 0 rgba(49, 130, 206, 0.25),
    0 4px 24px 0 rgba(49, 130, 206, 0.2),
    0 1.5px 0 0 rgba(49, 130, 206, 0.18);
}
</style>

<style>
/* Animation for mobile nav links */
.navlink-item {
  transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1), transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}
.navlink-item.show {
  opacity: 1 !important;
  transform: translateY(0) !important;
}
@media (min-width: 768px) {
  #header-nav-desktop {
    position: static !important;
    background: transparent !important
  }
  .navlink-item {
    transform: none !important;
    transition: none !important;
  }
}
</style>